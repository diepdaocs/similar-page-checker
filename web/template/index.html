{% extends "layout.html" %}

{% block content %}

<h3>Cross-Check Similarity</h3>
<form role="form" class="form-horizontal" action="{{ url_for('cross_check_sim') }}" method="POST" enctype="multipart/form-data">
    <div class="form-group">
        <label class="control-label col-sm-2" for="distance_metric">Distance metric:</label>
        <div class="col-sm-10">
            <input type="text" name="distance_metric" id="distance_metric" class="form-control"
                   placeholder="Distance metric, supported are jaccard, cosine, fuzzy, simhash, default is cosine">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-2" for="unit">N-gram unit:</label>
        <div class="col-sm-10">
            <input type="text" name="unit" id="unit" placeholder="Unit of n-gram, support value are word or character, default is word" class="form-control">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-2" for="min_ngram">Min n-gram:</label>
        <div class="col-sm-10">
            <input type="number" name="min_ngram" id="min_ngram" class="form-control" placeholder="Minimum length of ngram elements, default is 1 (minimum is 1)">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-2" for="max_ngram">Max n-gram:</label>
        <div class="col-sm-10">
            <input type="number" name="max_ngram" id="max_ngram" class="form-control" placeholder="Maximum length of ngram elements, default is 1 (maximum is 20)">
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <input type="file" name="file_text" id="file_text" class="form-control" required>
            <i>CSV (TAB delimiter) or EXCEL file (UTF-8 encoding)</i>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <input id="submit" type="submit" value="Submit" class="btn btn-default">
        </div>
    </div>
</form>

{% endblock %}
{% block js %}
<script>
    $('#submit').click(function(e) {
        // Check whether browser fully supports all File API
        if (window.File && window.FileReader && window.FileList && window.Blob) {
            var fsize = $('#file_text')[0].files[0].size;
            var limit_no_of_mb = 1024
            if(fsize > limit_no_of_mb * 1024 * 1024) {
                alert("Uploaded file is too big, exceed 1GB. Please split into smaller file before submitting!");
                e.preventDefault()
                return false;
            }
        } else {
            alert("Please upgrade your browser, because your current browser lacks some new features we need!");
        }
    });
</script>
{% endblock %}